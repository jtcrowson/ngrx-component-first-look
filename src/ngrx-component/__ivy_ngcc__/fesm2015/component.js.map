{"version":3,"file":"component.js","sources":["../../../../../../modules/component/src/core/utils/get-global-this.ts","../../../../../../modules/component/src/core/utils/is-ivy.ts","../../../../../../modules/component/src/core/utils/has-zone.ts","../../../../../../modules/component/src/core/utils/get-change-detection-handling.ts","../../../../../../modules/component/src/core/projections/toObservableValue.ts","../../../../../../modules/component/src/core/cd-aware.abstract.ts","../../../../../../modules/component/src/push/push.pipe.ts","../../../../../../modules/component/src/let/let.directive.ts","../../../../../../modules/component/src/reactive-component.module.ts","../../../../../../modules/component/component.ts"],"names":["markDirty","detectChanges"],"mappings":"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","sourcesContent":["// Returns a reference to global thin\n// - Browser\n// - SSR\n// - Tests\nexport function getGlobalThis(): any {\n  return ((globalThis as any) || (self as any) || (window as any)) as any;\n}\n","import { getGlobalThis } from './get-global-this';\n\n// Table for ng global presence in ViewEngine and Ivy for prod/dev modes:\n//\n// | render     |  ViewEngine    |  ViewEngine    |      Ivy          |      Ivy          |\n// | mode       |     prod       |      dev       |      prod         |      dev          |\n// | ng         |     present    |     present    |     undefined     |     present       |\n// | ng.probe   |     present    |     present    |     undefined     |     undefined     |\n//\n// So for Ivy we need to make sure that ng is undefined or,\n// in case of dev environment, ng.probe is undefined\n\nexport function isIvy(): boolean {\n  const ng: any = getGlobalThis().ng;\n\n  // Is the global ng object is unavailable?\n  // ng === undefined in Ivy production mode\n  // View Engine has the ng object both in development mode and production mode.\n  return (\n    ng === undefined ||\n    // in case we are in dev mode in ivy\n    // `probe` property is available on ng object we use View Engine.\n    ng.probe === undefined\n  );\n}\n","import { NgZone } from '@angular/core';\n\nexport function hasZone(z: NgZone): boolean {\n  return z.constructor.name !== 'NoopNgZone';\n}\n","import {\n  ChangeDetectorRef,\n  NgZone,\n  ÉµdetectChanges as detectChanges,\n  ÉµmarkDirty as markDirty,\n} from '@angular/core';\n\nimport { isIvy } from './is-ivy';\nimport { hasZone } from './has-zone';\n\nexport function getChangeDetectionHandler(\n  ngZone: NgZone,\n  cdRef: ChangeDetectorRef\n): <T>(component?: T) => void {\n  if (isIvy()) {\n    return hasZone(ngZone) ? markDirty : detectChanges;\n  } else {\n    return hasZone(ngZone)\n      ? cdRef.markForCheck.bind(cdRef)\n      : cdRef.detectChanges.bind(cdRef);\n  }\n}\n\nexport function getDetectChanges(\n  ngZone: NgZone,\n  cdRef: ChangeDetectorRef\n): <T>(component?: T) => void {\n  if (isIvy()) {\n    return !hasZone(ngZone) ? detectChanges : markDirty;\n  } else {\n    return hasZone(ngZone)\n      ? cdRef.markForCheck.bind(cdRef)\n      : cdRef.detectChanges.bind(cdRef);\n  }\n}\n","import { from, of, Observable, ObservableInput } from 'rxjs';\n\nexport function toObservableValue<T>(\n  p: ObservableInput<T> | undefined | null\n): Observable<T | undefined | null> {\n  return p == null ? of(p) : from(p);\n}\n","import { ChangeDetectorRef, NgZone } from '@angular/core';\nimport { getChangeDetectionHandler } from './utils';\nimport {\n  NextObserver,\n  Observable,\n  PartialObserver,\n  Subject,\n  Subscribable,\n  Subscription,\n} from 'rxjs';\nimport { distinctUntilChanged, map, switchAll, tap } from 'rxjs/operators';\nimport { toObservableValue } from './projections';\n\nexport interface CoalescingConfig {\n  optimized: boolean;\n}\n\nexport interface CdAware<U> extends Subscribable<U> {\n  next: (value: Observable<U> | Promise<U> | null | undefined) => void;\n}\n\nexport interface WorkConfig {\n  context: any;\n  ngZone: NgZone;\n  cdRef: ChangeDetectorRef;\n}\n\nexport function setUpWork(cfg: WorkConfig): () => void {\n  const render: (component?: any) => void = getChangeDetectionHandler(\n    cfg.ngZone,\n    cfg.cdRef\n  );\n  return () => render(cfg.context);\n}\n\n/**\n * class CdAware\n *\n * @description\n * This abstract class holds all the shared logic for the push pipe and the let directive\n * responsible for change detection\n * If you extend this class you need to implement how the update of the rendered value happens.\n * Also custom behaviour is something you need to implement in the extending class\n */\nexport function createCdAware<U>(cfg: {\n  work: () => void;\n  resetContextObserver: NextObserver<unknown>;\n  configurableBehaviour: (\n    o: Observable<Observable<U | null | undefined>>\n  ) => Observable<Observable<U | null | undefined>>;\n  updateViewContextObserver: PartialObserver<U | null | undefined>;\n}): CdAware<U | undefined | null> {\n  const observablesSubject = new Subject<\n    Observable<U> | Promise<U> | null | undefined\n  >();\n  // We have to defer the setup of observables$ until subscription as getConfigurableBehaviour is defined in the\n  // extending class. So getConfigurableBehaviour is not available in the abstract layer\n  const observables$: Observable<\n    U | undefined | null\n  > = observablesSubject.pipe(\n    // Ignore potential observables of the same instances\n    distinctUntilChanged(),\n    // Try to convert it to values, throw if not possible\n    map(toObservableValue),\n    tap((v: any) => {\n      cfg.resetContextObserver.next(v);\n      cfg.work();\n    }),\n    map(value$ =>\n      value$.pipe(distinctUntilChanged(), tap(cfg.updateViewContextObserver))\n    ),\n    // e.g. coalescing\n    cfg.configurableBehaviour,\n    // Unsubscribe from previous observables\n    // Then flatten the latest internal observables into the output\n    // @NOTICE applied behaviour (on the values, not the observable) will fire here\n    switchAll(),\n    tap(() => cfg.work())\n  );\n\n  return {\n    next(value: any): void {\n      observablesSubject.next(value);\n    },\n    subscribe(): Subscription {\n      return observables$.subscribe();\n    },\n  } as CdAware<U | undefined | null>;\n}\n","import {\n  ChangeDetectorRef,\n  EmbeddedViewRef,\n  NgZone,\n  OnDestroy,\n  Pipe,\n  PipeTransform,\n  Type,\n} from '@angular/core';\nimport {\n  NextObserver,\n  Observable,\n  PartialObserver,\n  Subject,\n  Unsubscribable,\n} from 'rxjs';\nimport { distinctUntilChanged, map, withLatestFrom } from 'rxjs/operators';\nimport {\n  CdAware,\n  CoalescingConfig as PushPipeConfig,\n  createCdAware,\n  setUpWork,\n} from '../core';\n\n/**\n * @Pipe PushPipe\n * @description\n *\n * The `ngrxPush` pipe serves as a drop-in replacement for the `async` pipe.\n * It contains intelligent handling of change detection to enable us\n * running in zone-full as well as zone-less mode without any changes to the code.\n *\n * The current way of binding an observable to the view looks like that:\n *  ```html\n *  {{observable$ | async}}\n * <ng-container *ngIf=\"observable$ | async as o\">{{o}}</ng-container>\n * <component [value]=\"observable$ | async\"></component>\n * ```\n *\n * The problem is `async` pipe just marks the component and all its ancestors as dirty.\n * It needs zone.js microtask queue to exhaust until `ApplicationRef.tick` is called to render all dirty marked components.\n *\n * Heavy dynamic and interactive UIs suffer from zones change detection a lot and can\n * lean to bad performance or even unusable applications, but the `async` pipe does not work in zone-less mode.\n *\n * `ngrxPush` pipe solves that problem.\n *\n * Included Features:\n *  - Take observables or promises, retrieve their values and render the value to the template\n *  - Handling null and undefined values in a clean unified/structured way\n *  - Triggers change-detection differently if `zone.js` is present or not (`detectChanges` or `markForCheck`)\n *  - Distinct same values in a row to increase performance\n *  - Coalescing of change detection calls to boost performance\n *\n * @usageNotes\n *\n * ### Examples\n *\n * `ngrxPush` pipe solves that problem. It can be used like shown here:\n * ```html\n * {{observable$ | ngrxPush}}\n * <ng-container *ngIf=\"observable$ | ngrxPush as o\">{{o}}</ng-container>\n * <component [value]=\"observable$ | ngrxPush\"></component>\n * ```\n *\n * @publicApi\n */\n@Pipe({ name: 'ngrxPush', pure: false })\nexport class PushPipe<S> implements PipeTransform, OnDestroy {\n  private renderedValue: S | null | undefined;\n\n  private readonly configSubject = new Subject<PushPipeConfig>();\n  private readonly config$ = this.configSubject\n    .asObservable()\n    .pipe(distinctUntilChanged());\n\n  private readonly subscription: Unsubscribable;\n  private readonly cdAware: CdAware<S | null | undefined>;\n  private readonly updateViewContextObserver: PartialObserver<\n    S | null | undefined\n  > = {\n    // assign value that will get returned from the transform function on the next change detection\n    next: (value: S | null | undefined) => (this.renderedValue = value),\n  };\n  private readonly resetContextObserver: NextObserver<unknown> = {\n    next: (value: unknown) => (this.renderedValue = undefined),\n  };\n  private readonly configurableBehaviour = <T>(\n    o$: Observable<Observable<T>>\n  ): Observable<Observable<T>> =>\n    o$.pipe(\n      withLatestFrom(this.config$),\n      map(([value$, config]) => {\n        // As discussed with Brandon we keep it here\n        // because in the beta we implement configuration behavior here\n        return value$.pipe();\n      })\n    );\n\n  constructor(cdRef: ChangeDetectorRef, ngZone: NgZone) {\n    this.cdAware = createCdAware<S>({\n      work: setUpWork({\n        ngZone,\n        cdRef,\n        context: (cdRef as EmbeddedViewRef<Type<any>>).context,\n      }),\n      updateViewContextObserver: this.updateViewContextObserver,\n      resetContextObserver: this.resetContextObserver,\n      configurableBehaviour: this.configurableBehaviour,\n    });\n    this.subscription = this.cdAware.subscribe();\n  }\n\n  transform(potentialObservable: null, config?: PushPipeConfig): null;\n  transform(potentialObservable: undefined, config?: PushPipeConfig): undefined;\n  transform(\n    potentialObservable: Observable<S> | Promise<S>,\n    config?: PushPipeConfig\n  ): S;\n  transform(\n    potentialObservable: Observable<S> | Promise<S> | null | undefined,\n    config: PushPipeConfig = { optimized: true }\n  ): S | null | undefined {\n    this.configSubject.next(config);\n    this.cdAware.next(potentialObservable);\n    return this.renderedValue;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Directive,\n  EmbeddedViewRef,\n  Input,\n  NgZone,\n  OnDestroy,\n  TemplateRef,\n  Type,\n  ViewContainerRef,\n} from '@angular/core';\n\nimport {\n  EMPTY,\n  NextObserver,\n  Observable,\n  PartialObserver,\n  ReplaySubject,\n  Unsubscribable,\n} from 'rxjs';\nimport {\n  catchError,\n  distinctUntilChanged,\n  filter,\n  map,\n  startWith,\n  withLatestFrom,\n} from 'rxjs/operators';\nimport {\n  CdAware,\n  CoalescingConfig as NgRxLetConfig,\n  createCdAware,\n  setUpWork,\n} from '../core';\n\nexport interface LetViewContext<T> {\n  // to enable `let` syntax we have to use $implicit (var; let v = var)\n  $implicit?: T;\n  // to enable `as` syntax we have to assign the directives selector (var as v)\n  ngrxLet?: T;\n  // set context var complete to true (var$; let v = $error)\n  $error?: boolean;\n  // set context var complete to true (var$; let v = $complete)\n  $complete?: boolean;\n}\n\n/**\n * @Directive LetDirective\n *\n * @description\n *\n * The `*ngrxLet` directive serves a convenient way of binding observables to a view context (a dom element scope).\n * It also helps with several internal processing under the hood.\n *\n * The current way of binding an observable to the view looks like that:\n * ```html\n * <ng-container *ngIf=\"observableNumber$ as n\">\n * <app-number [number]=\"n\">\n * </app-number>\n * <app-number-special [number]=\"n\">\n * </app-number-special>\n * </ng-container>\n *  ```\n *\n *  The problem is `*ngIf` is also interfering with rendering and in case of a `0` the component would be hidden\n *\n * Included Features:\n * - binding is always present. (`*ngIf=\"truthy$\"`)\n * - it takes away the multiple usages of the `async` or `ngrxPush` pipe\n * - a unified/structured way of handling null and undefined\n * - triggers change-detection differently if `zone.js` is present or not (`ChangeDetectorRef.detectChanges` or `ChangeDetectorRef.markForCheck`)\n * - triggers change-detection differently if ViewEngine or Ivy is present (`ChangeDetectorRef.detectChanges` or `ÉµdetectChanges`)\n * - distinct same values in a row (distinctUntilChanged operator),\n *\n * @usageNotes\n *\n * ### Examples\n *\n * The `*ngrxLet` directive take over several things and makes it more convenient and save to work with streams in the template\n * `<ng-container *ngrxLet=\"observableNumber$ as c\"></ng-container>`\n *\n * ```html\n * <ng-container *ngrxLet=\"observableNumber$ as n\">\n * <app-number [number]=\"n\">\n * </app-number>\n * </ng-container>\n *\n * <ng-container *ngrxLet=\"observableNumber$; let n\">\n * <app-number [number]=\"n\">\n * </app-number>\n * </ng-container>\n * ```\n *\n * In addition to that it provides us information from the whole observable context.\n * We can track the observables:\n * - next value\n * - error value\n * - complete state\n *\n * ```html\n * <ng-container *ngrxLet=\"observableNumber$; let n; let e = $error, let c = $complete\">\n * <app-number [number]=\"n\"  *ngIf=\"!e && !c\">\n * </app-number>\n * <ng-container *ngIf=\"e\">\n * There is an error: {{e}}\n * </ng-container>\n * <ng-container *ngIf=\"c\">\n * Observable completed: {{c}}\n * </ng-container>\n * </ng-container>\n * ```\n *\n * @publicApi\n */\n@Directive({ selector: '[ngrxLet]' })\nexport class LetDirective<U> implements OnDestroy {\n  private embeddedView: any;\n  private readonly ViewContext: LetViewContext<U | undefined | null> = {\n    $implicit: undefined,\n    ngrxLet: undefined,\n    $error: false,\n    $complete: false,\n  };\n\n  private readonly configSubject = new ReplaySubject<NgRxLetConfig>();\n  private readonly config$ = this.configSubject.pipe(\n    filter(v => v !== undefined && v !== null),\n    distinctUntilChanged(),\n    startWith({ optimized: true })\n  );\n\n  protected readonly subscription: Unsubscribable;\n  private readonly cdAware: CdAware<U | null | undefined>;\n  private readonly resetContextObserver: NextObserver<unknown> = {\n    next: () => {\n      // if not initialized no need to set undefined\n      if (this.embeddedView) {\n        this.ViewContext.$implicit = undefined;\n        this.ViewContext.ngrxLet = undefined;\n        this.ViewContext.$error = false;\n        this.ViewContext.$complete = false;\n      }\n    },\n  };\n  private readonly updateViewContextObserver: PartialObserver<\n    U | null | undefined\n  > = {\n    next: (value: U | null | undefined) => {\n      // to have init lazy\n      if (!this.embeddedView) {\n        this.createEmbeddedView();\n      }\n      this.ViewContext.$implicit = value;\n      this.ViewContext.ngrxLet = value;\n    },\n    error: (error: Error) => {\n      // to have init lazy\n      if (!this.embeddedView) {\n        this.createEmbeddedView();\n      }\n      this.ViewContext.$error = true;\n    },\n    complete: () => {\n      // to have init lazy\n      if (!this.embeddedView) {\n        this.createEmbeddedView();\n      }\n      this.ViewContext.$complete = true;\n    },\n  };\n\n  static ngTemplateContextGuard<U>(\n    dir: LetDirective<U>,\n    ctx: unknown\n  ): ctx is LetViewContext<U> {\n    return true;\n  }\n\n  private readonly configurableBehaviour = <T>(\n    o$: Observable<Observable<T>>\n  ): Observable<Observable<T>> =>\n    o$.pipe(\n      withLatestFrom(this.config$),\n      // @NOTICE: unused config => As discussed with Brandon we keep it here because in the beta release we implement configuration behavior here\n      map(([value$, config]) => {\n        return value$.pipe(catchError(e => EMPTY));\n      })\n    );\n\n  @Input()\n  set ngrxLet(\n    potentialObservable: Observable<U> | Promise<U> | null | undefined\n  ) {\n    this.cdAware.next(potentialObservable);\n  }\n\n  @Input()\n  set ngrxLetConfig(config: NgRxLetConfig) {\n    this.configSubject.next(config || { optimized: true });\n  }\n\n  constructor(\n    cdRef: ChangeDetectorRef,\n    ngZone: NgZone,\n    private readonly templateRef: TemplateRef<LetViewContext<U>>,\n    private readonly viewContainerRef: ViewContainerRef\n  ) {\n    this.cdAware = createCdAware<U>({\n      work: setUpWork({\n        cdRef,\n        ngZone,\n        context: (cdRef as EmbeddedViewRef<Type<any>>).context,\n      }),\n      resetContextObserver: this.resetContextObserver,\n      updateViewContextObserver: this.updateViewContextObserver,\n      configurableBehaviour: this.configurableBehaviour,\n    });\n    this.subscription = this.cdAware.subscribe();\n  }\n\n  createEmbeddedView() {\n    this.embeddedView = this.viewContainerRef.createEmbeddedView(\n      this.templateRef,\n      this.ViewContext\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.viewContainerRef.clear();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { LetDirective } from './let';\nimport { PushPipe } from './push';\n\nconst DECLARATIONS = [LetDirective, PushPipe];\nconst EXPORTS = [DECLARATIONS];\n\n@NgModule({\n  declarations: [DECLARATIONS],\n  exports: [EXPORTS],\n})\nexport class ReactiveComponentModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}